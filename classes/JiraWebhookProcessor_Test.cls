@Istest
private class JiraWebhookProcessor_Test {
    
    @IsTest static void testprocessJiraWebhookRequest(){
 
        Test.startTest();
        list<id> jirid_1=new list<id>();
        list<id> jirid_2=new list<id>();
        list<id> jirid_3=new list<id>();
        list<id> jirid_4=new list<id>();
        list<id> jirid_5=new list<id>();
        list<id> jirid_6=new list<id>();
        
        Jira_User_Account__c jiraUserAccount = new Jira_User_Account__c(Email_Address__c = 'sfadmin@demandblue.com', 
                                                                       Jira_User_Account_Id__c = '5b03dc8556a',
                                                                       Name = 'DemandBlue Jira Admin');
		insert jiraUserAccount;

        List<JIRA_Issue_Key__c> JIK_1 = new List<JIRA_Issue_Key__c>();    
                      JIRA_Issue_Key__c obj_1=new JIRA_Issue_Key__c(Key_Name__c = 'test_1', Jira_User_Account__c = jiraUserAccount.Id,
                                                                  Request_Body__c='    { "timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":"issue_created",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 			"issuetype": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/issuetype/10001", 				"id":"10001", 				"description":"A user story. Created by Jira Software - do not edit or delete.", 				"iconUrl":"https://demandblue.atlassian.net/secure/viewavatarsize=medium&avatarId=10315&avatarType=issuetype", 				"name":"Story", 				"subtask":false, 				"avatarId":10315 			}, 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"timespent":null, 			"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"labels":["webhook"], 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		}, 		"changelog": 		{ 			"id":"31094", 			"items": 			[ 			{ 				"field":"assignee", 				"fieldtype":"jira", 				"fieldId":"assignee", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"priority", 				"fieldtype":"jira", 				"fieldId":"priority", 				"from":null, 				"fromString":null, 				"to":"3", 				"toString":"Medium" 			}, 			{ 				"field":"reporter", 				"fieldtype":"jira", 				"fieldId":"reporter", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"Status", 				"fieldtype":"jira", 				"fieldId":"status", 				"from":null, 				"fromString":null, 				"to":"1", 				"toString":"New" 			}, 			{ 				"field":"summary", 				"fieldtype":"jira", 				"fieldId":"summary", 				"from":null, 				"fromString":null, 				"to":null, 				"toString":"Sample Webhook Request" 	}] 		}	} }'                            
                                                                   );
        JIK_1.add(obj_1);
        insert JIK_1;
        id recordid_1=JIK_1[0].Id;
        jirid_1.add(recordid_1);
        
        List<JIRA_Issue_Key__c> JIK_2 = new List<JIRA_Issue_Key__c>();    
                      JIRA_Issue_Key__c obj_2=new JIRA_Issue_Key__c(Key_Name__c = 'test_2', Jira_User_Account__c = jiraUserAccount.Id,
                                                                  Request_Body__c='{ 	"timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":" ",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 			"issuetype": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/issuetype/10001", 				"id":"10001", 				"description":"A user story. Created by Jira Software - do not edit or delete.", 				"iconUrl":"https://demandblue.atlassian.net/secure/viewavatarsize=medium&avatarId=10315&avatarType=issuetype", 				"name":"Story", 				"subtask":false, 				"avatarId":10315 			}, 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"timespent":null, 			"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"labels":["webhook"], 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		}, 		"changelog": 		{ 			"id":"31094", 			"items": 			[ 			{ 				"field":"assignee", 				"fieldtype":"jira", 				"fieldId":"assignee", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"priority", 				"fieldtype":"jira", 				"fieldId":"priority", 				"from":null, 				"fromString":null, 				"to":"3", 				"toString":"Medium" 			}, 			{ 				"field":"reporter", 				"fieldtype":"jira", 				"fieldId":"reporter", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"Status", 				"fieldtype":"jira", 				"fieldId":"status", 				"from":null, 				"fromString":null, 				"to":"1", 				"toString":"New" 			}, 			{ 				"field":"summary", 				"fieldtype":"jira", 				"fieldId":"summary", 				"from":null, 				"fromString":null, 				"to":null, 				"toString":"Sample Webhook Request" 			}] 		} 	} }'
                                                                   );
        JIK_2.add(obj_2);
        insert JIK_2;
        id recordid_2=JIK_2[0].Id;
        jirid_2.add(recordid_2);
        List<JIRA_Issue_Key__c> JIK_3 = new List<JIRA_Issue_Key__c>();
        JIRA_Issue_Key__c obj_3=new JIRA_Issue_Key__c(Key_Name__c = 'test_3', Jira_User_Account__c = jiraUserAccount.Id,
                                                      Request_Body__c='{ 	"timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":"issue_updated",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 			"issuetype": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/issuetype/10001", 				"id":"10001", 				"description":"A user story. Created by Jira Software - do not edit or delete.", 				"iconUrl":"https://demandblue.atlassian.net/secure/viewavatarsize=medium&avatarId=10315&avatarType=issuetype", 				"name":"Story", 				"subtask":false, 				"avatarId":10315 			}, 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"labels":[" "], 			"timespent":null, 			"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		}, 		"changelog": 		{ 			"id":"31094", 			"items": 			[ 			{ 				"field":"assignee", 				"fieldtype":"jira", 				"fieldId":"assignee", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"priority", 				"fieldtype":"jira", 				"fieldId":"priority", 				"from":null, 				"fromString":null, 				"to":"3", 				"toString":"Medium" 			}, 			{ 				"field":"reporter", 				"fieldtype":"jira", 				"fieldId":"reporter", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"Status", 				"fieldtype":"jira", 				"fieldId":"status", 				"from":null, 				"fromString":null, 				"to":"1", 				"toString":"New" 			}, 			{ 				"field":"summary", 				"fieldtype":"jira", 				"fieldId":"summary", 				"from":null, 				"fromString":null, 				"to":null, 				"toString":"Sample Webhook Request" 			} 			] 		} 	}	 }'
                                                 );
        JIK_3.add(obj_3);
        insert JIK_3;
        id recordid_3=JIK_3[0].Id;
        jirid_3.add(recordid_3);   


        List<JIRA_Issue_Key__c> JIK_4 = new List<JIRA_Issue_Key__c>();
        JIRA_Issue_Key__c obj_4=new JIRA_Issue_Key__c(Key_Name__c = 'test_4', Jira_User_Account__c = jiraUserAccount.Id,
                                                      Request_Body__c='{ 	"timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":"issue_created",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 			"issuetype": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/issuetype/10001", 				"id":"10001", 				"description":"A user story. Created by Jira Software - do not edit or delete.", 				"iconUrl":"https://demandblue.atlassian.net/secure/viewavatarsize=medium&avatarId=10315&avatarType=issuetype", 				"name":"Story", 				"subtask":false, 				"avatarId":10315 			}, 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"timespent":null, 		"labels":[],	"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		} 	}, 	"changelog": 	{ 		"id":"31094", 		"items": 		[ 		{ 			"field":"assignee", 			"fieldtype":"jira", 			"fieldId":"assignee", 			"from":null, 			"fromString":null, 			"to":"yuvaraj", 			"toString":"Yuvaraj M", 			"tmpFromAccountId":null, 			"tmpToAccountId":"5b03dc8556a" 		}, 		{ 			"field":"priority", 			"fieldtype":"jira", 			"fieldId":"priority", 			"from":null, 			"fromString":null, 			"to":"3", 			"toString":"Medium" 		}, 		{ 			"field":"reporter", 			"fieldtype":"jira", 			"fieldId":"reporter", 			"from":null, 			"fromString":null, 			"to":"yuvaraj", 			"toString":"Yuvaraj M", 			"tmpFromAccountId":null, 			"tmpToAccountId":"5b03dc8556a" 		}, 		{ 			"field":"Status", 			"fieldtype":"jira", 			"fieldId":"status", 			"from":null, 			"fromString":null, 			"to":"1", 			"toString":"New" 		}, 		{ 			"field":"summary", 			"fieldtype":"jira", 			"fieldId":"summary", 			"from":null, 			"fromString":null, 			"to":null, 			"toString":"Sample Webhook Request" 		}] 	}  }'
		                                                                   );
        JIK_4.add(obj_4);
        insert JIK_4;
        id recordid_4=JIK_4[0].Id;
        jirid_4.add(recordid_4);
        List<JIRA_Issue_Key__c> JIK_5 = new List<JIRA_Issue_Key__c>();
        JIRA_Issue_Key__c obj_5=new JIRA_Issue_Key__c(Key_Name__c = 'test_5', Jira_User_Account__c = jiraUserAccount.Id,
                                                      Request_Body__c='{ 	"timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":"issue_updated",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 		 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"labels":[" "], 			"timespent":null, 			"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		}, 		"changelog": 		{ 			"id":"31094", 			"items": 			[ 			{ 				"field":"assignee", 				"fieldtype":"jira", 				"fieldId":"assignee", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"priority", 				"fieldtype":"jira", 				"fieldId":"priority", 				"from":null, 				"fromString":null, 				"to":"3", 				"toString":"Medium" 			}, 			{ 				"field":"reporter", 				"fieldtype":"jira", 				"fieldId":"reporter", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"Status", 				"fieldtype":"jira", 				"fieldId":"status", 				"from":null, 				"fromString":null, 				"to":"1", 				"toString":"New" 			}, 			{ 				"field":"summary", 				"fieldtype":"jira", 				"fieldId":"summary", 				"from":null, 				"fromString":null, 				"to":null, 				"toString":"Sample Webhook Request" 			} 			] 		} 	}	 }'
		                                                                   );
        JIK_5.add(obj_5);
        insert JIK_5;
        id recordid_5=JIK_5[0].Id;
        jirid_5.add(recordid_5);
        List<JIRA_Issue_Key__c> JIK_6 = new List<JIRA_Issue_Key__c>();
        JIRA_Issue_Key__c obj_6=new JIRA_Issue_Key__c(Key_Name__c = 'test_6', Jira_User_Account__c = jiraUserAccount.Id,
                                                      Request_Body__c='{ 	"timestamp":1567169833616, 	"webhookEvent":"jira:issue_created", 	"issue_event_type_name":"issue_updated",  	"user":	 	{ 		"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 		"name":"yuvaraj", 		"key":"yuvaraj", 		"accountId":"5b03dc8556a", 		"emailAddress":"yuvaraj@preludesys.com", 		"displayName":"Yuvaraj M", 		"active":true, 		"timeZone":"America/Los_Angeles", 		"accountType":"atlassian" 	},  	"issue": 	{ 		"id":"15102", 		"self":"https://demandblue.atlassian.net/rest/api/2/issue/15102", 		"key":"DL-21", 		"fields": 		{ 			"statuscategorychangedate":"2019-08-30T05:57:13.765-0700", 			"issuetype": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/issuetype/10001", 				"id":"10001", 				"description":"A user story. Created by Jira Software - do not edit or delete.", 				"iconUrl":"https://demandblue.atlassian.net/secure/viewavatarsize=medium&avatarId=10315&avatarType=issuetype", 				"name":"Story", 				"subtask":false, 				"avatarId":10315 			}, 			"reporter": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 				"name":"yuvaraj", 				"key":"yuvaraj", 				"accountId":"5b03dc8556a", 				"emailAddress":"yuvaraj@preludesys.com", 				"displayName":"Yuvaraj M", 				"active":true, 				"timeZone":"America/Los_Angeles", 				"accountType":"atlassian" 			}, 			"labels":[" "], 			"timespent":null, 			"project": 			{ 				"self":"https://demandblue.atlassian.net/rest/api/2/project/10050", 				"id":"10050", 				"key":"DL", 				"name":"DemandBlue Labs", 				"projectTypeKey":"software", 				"simplified":false}, 				"fixVersions":[], 				"aggregatetimespent":null, 				"resolution":null, 				"resolutiondate":null, 				"workratio":0, 				"lastViewed":null, 				"watches": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/watchers", 					"watchCount":0, 					"isWatching":true 				}, 				"created":"2019-08-30T05:57:13.551-0700", 				"customfield_10140":null, 				"customfield_10141":null, 				"customfield_10142":null, 				"priority": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/priority/3", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/priorities/medium.svg", 					"name":"Medium", 					"id":"3" 				}, 				"customfield_10138":null, 				"customfield_10139":null, 				"customfield_10018":null, 				"aggregatetimeoriginalestimate":3600, 				"timeestimate":3600, 				"versions":[], 				"issuelinks":[], 				"assignee": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"updated":"2019-08-30T05:57:13.551-0700", 				"status": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/status/1", 					"description":"The issue is open and ready for the assignee to start work on it.", 					"iconUrl":"https://demandblue.atlassian.net/images/icons/statuses/open.png", 					"name":"New", 					"id":"1", 					"statusCategory": 					{ 						"self":"https://demandblue.atlassian.net/rest/api/2/statuscategory/2", 						"id":2, 						"key":"new", 						"colorName":"blue-gray", 						"name":"New" 					} 				}, 				"components":[], 				"timeoriginalestimate":3600, 				"description":null, 				"customfield_10131":null, 				"customfield_10010":null, 				"customfield_10011":"1|i00lar:", 				"customfield_10132":null, 				"customfield_10012":null, 				"customfield_10133":null, 				"customfield_10134":[], 				"customfield_10013":null, 				"customfield_10014":null, 				"timetracking": 				{ 					"originalEstimate":"1h", 					"remainingEstimate":"1h", 					"originalEstimateSeconds":3600, 					"remainingEstimateSeconds":3600 				}, 				"security":null, 				"customfield_10008":null, 				"customfield_10009": 				{ 					"hasEpicLinkFieldDependency":false, 					"showField":false, 					"nonEditableReason": 					{ 						"reason":"PLUGIN_LICENSE_ERROR", 						"message":"Portfolio for Jira must be licensed for the Parent Link to be available." 					} 				}, 				"aggregatetimeestimate":3600, 				"attachment":[], 				"summary":"Sample Webhook Request", 				"creator": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/useraccountId=5b03dc8556a", 					"name":"yuvaraj", 					"key":"yuvaraj", 					"accountId":"5b03dc8556a", 					"emailAddress":"yuvaraj@preludesys.com", 					"displayName":"Yuvaraj M", 					"active":true, 					"timeZone":"America/Los_Angeles", 					"accountType":"atlassian" 				}, 				"subtasks":[], 			 				"aggregateprogress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"customfield_10000":"{}", 				"customfield_10001":null, 				"customfield_10004":null, 				"environment":null, 				"duedate":null, 				"progress": 				{ 					"progress":0, 					"total":3600, 					"percent":0 				}, 				"votes": 				{ 					"self":"https://demandblue.atlassian.net/rest/api/2/issue/DL-21/votes", 					"votes":0, 					"hasVoted":false 				} 			} 		}, 		"changelog": 		{ 			"id":"31094", 			"items": 			[ 			{ 				"field":"assignee", 				"fieldtype":"jira", 				"fieldId":"assignee", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"priority", 				"fieldtype":"jira", 				"fieldId":"priority", 				"from":null, 				"fromString":null, 				"to":"3", 				"toString":"Medium" 			}, 			{ 				"field":"reporter", 				"fieldtype":"jira", 				"fieldId":"reporter", 				"from":null, 				"fromString":null, 				"to":"yuvaraj", 				"toString":"Yuvaraj M", 				"tmpFromAccountId":null, 				"tmpToAccountId":"5b03dc8556a" 			}, 			{ 				"field":"Status", 				"fieldtype":"jira", 				"fieldId":"status", 				"from":null, 				"fromString":null, 				"to":"1", 				"toString":"New" 			}, 			{ 				"field":"labels", 				"fieldtype":"jira", 				"fieldId":"summary", 				"from":null, 				"fromString":null, 				"to":null, 				"toString":"Sample Webhook Request" 			} 			] 		} 	}	 }'
		                                                                   );
        JIK_6.add(obj_6);
        insert JIK_6;
        id recordid_6=JIK_6[0].Id;
        jirid_6.add(recordid_6);
                
        /*List<Integer> l=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_1));
        List<Integer> l_2=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_2));
        List<Integer> l_4=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_4));
        List<Integer> l_3=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_3));
        List<Integer> l_5=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_5));
        List<Integer> l_6=new list<Integer>( JiraWebhookProcessor.processJiraWebhookRequest(jirid_6));*/
        Test.stopTest();
    }
}